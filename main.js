/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  typingCount: 0,
  mySetting: "default"
};

// src/main.ts
var MyPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.typingTimeout = null;
    this.frameIndex = 0;
    this.frames = [
      "panda_pluck_2.png",
      "panda_pluck_3.png"
    ];
    this.typingCount = 0;
  }
  async onload() {
    var _a;
    await this.loadSettings();
    console.log("Panda plugin loaded!");
    this.typingCount = (_a = this.settings.typingCount) != null ? _a : 0;
    this.app.workspace.onLayoutReady(() => {
      this.createPanda();
    });
    console.log("Panda element:", this.pandaEl);
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        this.onUserTyping();
      })
    );
  }
  onunload() {
    if (this.pandaEl) {
      this.pandaEl.remove();
    }
  }
  createPanda() {
    this.pandaEl = createDiv({ cls: "panda-container" });
    this.pandaImg = this.pandaEl.createEl("img", {
      attr: { src: this.getAssetPath("panda_idle.png") },
      cls: "panda-img"
    });
    this.counterEl = this.pandaEl.createEl("div", {
      cls: "panda-counter",
      text: this.typingCount.toString()
    });
    document.body.appendChild(this.pandaEl);
  }
  onUserTyping() {
    this.nextFrame();
    this.typingCount++;
    this.counterEl.textContent = this.typingCount.toString();
    this.settings.typingCount = this.typingCount;
    this.saveSettings();
    if (this.typingTimeout) {
      clearTimeout(this.typingTimeout);
    }
    this.typingTimeout = window.setTimeout(() => {
      this.frameIndex = 0;
      this.pandaImg.src = this.getAssetPath("panda_idle.png");
    }, 200);
  }
  nextFrame() {
    this.frameIndex = (this.frameIndex + 1) % this.frames.length;
    this.pandaImg.src = this.getAssetPath(this.frames[this.frameIndex]);
  }
  getAssetPath(file) {
    return this.app.vault.adapter.getResourcePath(
      `${this.manifest.dir}/assets/${file}`
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge0FwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1MsIE15UGx1Z2luU2V0dGluZ3MsIFNhbXBsZVNldHRpbmdUYWJ9IGZyb20gXCIuL3NldHRpbmdzXCI7XHJcblxyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcblxyXG5cdFx0cGFuZGFFbDogSFRNTERpdkVsZW1lbnQ7IFxyXG5cdFx0cGFuZGFJbWc6IEhUTUxJbWFnZUVsZW1lbnQ7IFxyXG5cdFx0Y291bnRlckVsOiBIVE1MRGl2RWxlbWVudDtcclxuXHJcblx0XHR0eXBpbmdUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRcdGZyYW1lSW5kZXggPSAwO1xyXG5cdFx0ZnJhbWVzOiBzdHJpbmdbXSA9IFtcclxuXHRcdFx0XCJwYW5kYV9wbHVja18yLnBuZ1wiLFxyXG5cdFx0XHRcInBhbmRhX3BsdWNrXzMucG5nXCJcclxuXHRcdF07XHJcblx0XHR0eXBpbmdDb3VudCA9IDA7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJQYW5kYSBwbHVnaW4gbG9hZGVkIVwiKTtcclxuXHJcblx0XHR0aGlzLnR5cGluZ0NvdW50ID0gdGhpcy5zZXR0aW5ncy50eXBpbmdDb3VudCA/PyAwO1xyXG5cdFx0XHJcblx0XHQvLyBjcmVhdGUgY3V0ZSBwYW5kYVxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNyZWF0ZVBhbmRhKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIlBhbmRhIGVsZW1lbnQ6XCIsIHRoaXMucGFuZGFFbCk7XHJcblxyXG5cclxuXHRcdC8vZGV0ZWN0IHR5cGluZ1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJlZGl0b3ItY2hhbmdlXCIsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm9uVXNlclR5cGluZygpO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0aWYgKHRoaXMucGFuZGFFbCkge1xyXG5cdFx0XHR0aGlzLnBhbmRhRWwucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjcmVhdGVQYW5kYSgpIHtcclxuXHRcdHRoaXMucGFuZGFFbCA9IGNyZWF0ZURpdih7Y2xzOiBcInBhbmRhLWNvbnRhaW5lclwifSk7XHJcblx0XHR0aGlzLnBhbmRhSW1nID0gdGhpcy5wYW5kYUVsLmNyZWF0ZUVsKFwiaW1nXCIsIHtcclxuXHRcdFx0YXR0cjoge3NyYzogdGhpcy5nZXRBc3NldFBhdGgoXCJwYW5kYV9pZGxlLnBuZ1wiKX0sXHJcblx0XHRcdGNsczogXCJwYW5kYS1pbWdcIlxyXG5cdFx0fSlcclxuXHJcblx0XHR0aGlzLmNvdW50ZXJFbCA9IHRoaXMucGFuZGFFbC5jcmVhdGVFbChcImRpdlwiLCB7XHJcblx0XHRcdGNsczogXCJwYW5kYS1jb3VudGVyXCIsXHJcblx0XHRcdHRleHQ6IHRoaXMudHlwaW5nQ291bnQudG9TdHJpbmcoKVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBhbmRhRWwpO1xyXG5cdH1cclxuXHJcblx0b25Vc2VyVHlwaW5nKCkge1xyXG5cdFx0dGhpcy5uZXh0RnJhbWUoKTtcclxuXHJcblx0XHQvLyBjb3VudCB0eXBpbmdcclxuXHRcdHRoaXMudHlwaW5nQ291bnQrKztcclxuXHRcdHRoaXMuY291bnRlckVsLnRleHRDb250ZW50ID0gdGhpcy50eXBpbmdDb3VudC50b1N0cmluZygpO1xyXG5cclxuXHRcdC8vIHNhdmUgdHlwaW5nIGNvdW50XHJcblx0XHR0aGlzLnNldHRpbmdzLnR5cGluZ0NvdW50ID0gdGhpcy50eXBpbmdDb3VudDtcclxuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblxyXG5cclxuXHRcdGlmICh0aGlzLnR5cGluZ1RpbWVvdXQpIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudHlwaW5nVGltZW91dCk7XHJcblx0XHR9XHJcblx0XHQvL3JldHVybiB0byBpZGxlIGFmdGVyIHNvbWUgdGltZSBub3QgdHlwaW5nXHJcblx0XHR0aGlzLnR5cGluZ1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMuZnJhbWVJbmRleCA9IDA7XHJcblx0XHRcdHRoaXMucGFuZGFJbWcuc3JjID0gdGhpcy5nZXRBc3NldFBhdGgoXCJwYW5kYV9pZGxlLnBuZ1wiKTtcclxuXHRcdH0sIDIwMCk7XHJcblx0fVxyXG5cclxuXHRuZXh0RnJhbWUoKSB7XHJcblx0XHR0aGlzLmZyYW1lSW5kZXggPSAodGhpcy5mcmFtZUluZGV4ICsgMSkgJSB0aGlzLmZyYW1lcy5sZW5ndGg7XHJcblx0XHR0aGlzLnBhbmRhSW1nLnNyYyA9IHRoaXMuZ2V0QXNzZXRQYXRoKHRoaXMuZnJhbWVzW3RoaXMuZnJhbWVJbmRleF0hKTtcclxuXHR9XHJcblxyXG5cclxuXHRnZXRBc3NldFBhdGgoZmlsZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldFJlc291cmNlUGF0aChcclxuXHRcdFx0YCR7dGhpcy5tYW5pZmVzdC5kaXJ9L2Fzc2V0cy8ke2ZpbGV9YFxyXG5cdFx0KVxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPE15UGx1Z2luU2V0dGluZ3M+KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGxldCB7Y29udGVudEVsfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuc2V0VGV4dCgnV29haCEnKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7QXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gXCIuL21haW5cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcblx0dHlwaW5nQ291bnQ6IG51bWJlcjtcclxuXHRteVNldHRpbmc6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0dHlwaW5nQ291bnQ6IDAsXHJcblx0bXlTZXR0aW5nOiAnZGVmYXVsdCdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1NldHRpbmdzICMxJylcclxuXHRcdFx0LnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBzZWNyZXQnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBK0Q7OztBQ0EvRCxzQkFBNkM7QUFRdEMsSUFBTSxtQkFBcUM7QUFBQSxFQUNqRCxhQUFhO0FBQUEsRUFDYixXQUFXO0FBQ1o7OztBRExBLElBQXFCLFdBQXJCLGNBQXNDLHdCQUFPO0FBQUEsRUFBN0M7QUFBQTtBQU9FLHlCQUErQjtBQUMvQixzQkFBYTtBQUNiLGtCQUFtQjtBQUFBLE1BQ2xCO0FBQUEsTUFDQTtBQUFBLElBQ0Q7QUFDQSx1QkFBYztBQUFBO0FBQUEsRUFFZixNQUFNLFNBQVM7QUFyQmhCO0FBc0JFLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFlBQVEsSUFBSSxzQkFBc0I7QUFFbEMsU0FBSyxlQUFjLFVBQUssU0FBUyxnQkFBZCxZQUE2QjtBQUdoRCxTQUFLLElBQUksVUFBVSxjQUFjLE1BQU07QUFDdEMsV0FBSyxZQUFZO0FBQUEsSUFDbEIsQ0FBQztBQUVELFlBQVEsSUFBSSxrQkFBa0IsS0FBSyxPQUFPO0FBSTFDLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsaUJBQWlCLE1BQU07QUFDNUMsYUFBSyxhQUFhO0FBQUEsTUFDbkIsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUEsRUFFQSxXQUFXO0FBQ1YsUUFBSSxLQUFLLFNBQVM7QUFDakIsV0FBSyxRQUFRLE9BQU87QUFBQSxJQUNyQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLGNBQWM7QUFDYixTQUFLLFVBQVUsVUFBVSxFQUFDLEtBQUssa0JBQWlCLENBQUM7QUFDakQsU0FBSyxXQUFXLEtBQUssUUFBUSxTQUFTLE9BQU87QUFBQSxNQUM1QyxNQUFNLEVBQUMsS0FBSyxLQUFLLGFBQWEsZ0JBQWdCLEVBQUM7QUFBQSxNQUMvQyxLQUFLO0FBQUEsSUFDTixDQUFDO0FBRUQsU0FBSyxZQUFZLEtBQUssUUFBUSxTQUFTLE9BQU87QUFBQSxNQUM3QyxLQUFLO0FBQUEsTUFDTCxNQUFNLEtBQUssWUFBWSxTQUFTO0FBQUEsSUFDakMsQ0FBQztBQUVELGFBQVMsS0FBSyxZQUFZLEtBQUssT0FBTztBQUFBLEVBQ3ZDO0FBQUEsRUFFQSxlQUFlO0FBQ2QsU0FBSyxVQUFVO0FBR2YsU0FBSztBQUNMLFNBQUssVUFBVSxjQUFjLEtBQUssWUFBWSxTQUFTO0FBR3ZELFNBQUssU0FBUyxjQUFjLEtBQUs7QUFDakMsU0FBSyxhQUFhO0FBR2xCLFFBQUksS0FBSyxlQUFlO0FBQ3ZCLG1CQUFhLEtBQUssYUFBYTtBQUFBLElBQ2hDO0FBRUEsU0FBSyxnQkFBZ0IsT0FBTyxXQUFXLE1BQU07QUFDNUMsV0FBSyxhQUFhO0FBQ2xCLFdBQUssU0FBUyxNQUFNLEtBQUssYUFBYSxnQkFBZ0I7QUFBQSxJQUN2RCxHQUFHLEdBQUc7QUFBQSxFQUNQO0FBQUEsRUFFQSxZQUFZO0FBQ1gsU0FBSyxjQUFjLEtBQUssYUFBYSxLQUFLLEtBQUssT0FBTztBQUN0RCxTQUFLLFNBQVMsTUFBTSxLQUFLLGFBQWEsS0FBSyxPQUFPLEtBQUssVUFBVSxDQUFFO0FBQUEsRUFDcEU7QUFBQSxFQUdBLGFBQWEsTUFBc0I7QUFDbEMsV0FBTyxLQUFLLElBQUksTUFBTSxRQUFRO0FBQUEsTUFDN0IsR0FBRyxLQUFLLFNBQVMsR0FBRyxXQUFXLElBQUk7QUFBQSxJQUNwQztBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBOEI7QUFBQSxFQUN2RztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiJdCn0K
